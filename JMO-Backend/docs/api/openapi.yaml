openapi: 3.0.3
info:
  title: JMO-Backend API
  version: 1.0.0
  description: API REST de SnapNation.
servers:
  - url: http://localhost:3000
tags:
  - name: Health
  - name: Auth
  - name: Users
  - name: Email
paths:
  /health:
    get:
      tags: [Health]
      summary: Health check general
      responses:
        '200':
          description: Servicio activo
  /api/v1/health:
    get:
      tags: [Health]
      summary: Health check de la API v1
      responses:
        '200':
          description: API activa
  /api/v1/auth/register:
    post:
      tags: [Auth]
      summary: Registro de usuario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [username, email, password]
              properties:
                username:
                  type: string
                email:
                  type: string
                password:
                  type: string
                community_id:
                  type: integer
      responses:
        '201':
          description: Usuario registrado
        '400':
          description: Datos inválidos
        '409':
          description: Usuario ya existe
  /api/v1/auth/login:
    post:
      tags: [Auth]
      summary: Login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Login correcto
        '400':
          description: Datos inválidos
        '401':
          description: Credenciales incorrectas
  /api/v1/users/me:
    get:
      tags: [Users]
      summary: Perfil del usuario autenticado
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Perfil
        '401':
          description: No autenticado
  /api/v1/email/test:
    post:
      tags: [Email]
      summary: Enviar email de prueba
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [to, subject]
              properties:
                to:
                  type: string
                subject:
                  type: string
                text:
                  type: string
                html:
                  type: string
      responses:
        '200':
          description: Email procesado
        '400':
          description: Datos inválidos
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
